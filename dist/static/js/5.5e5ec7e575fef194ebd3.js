webpackJsonp([5],{"0jH9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),i=(a("Gu7T"),a("ssT3"),{name:"Register",data:function(){return{captcha_image_content:"",username:"",password:"",cpassword:"",phone:"",msg:"",msgType:"",msgShow:!1,showCaptcha:!1,captcha_key:"",captcha_code:"",verification_key:"",verification_code:""}},created:function(){},methods:{getCaptcha:function(){var t=this;if(11==this.phone.length){var e=this.$swal;this.$axios.post("/apis/captchas",{phone:this.phone}).then(function(e){t.showCaptcha=!0,t.captcha_image_content=e.data.captcha_image_content,t.captcha_key=e.data.captcha_key}).catch(function(t){null!=t.response&&e({text:t.response.data.errors.phone[0],confirmButtonText:"我知道了",showCancelButton:!1})})}},getVerification:function(){var t=this,e=this.$swal;this.$axios.post("/apis/verificationCodes",{phone:this.phone,captcha_key:this.captcha_key,captcha_code:this.captcha_code}).then(function(a){t.showCaptcha=!1,console.log(a),t.verification_key=a.data.key,e({text:"验证码发送成功，请耐心等待",type:"success",confirmButtonText:"我知道了",showCancelButton:!1})}).catch(function(t){console.log(t.response.data.message),null!=t.response&&e({text:t.response.data.message,confirmButtonText:"我知道了",showCancelButton:!1})})},register:function(t){var e=this;this.$nextTick(function(){("submit"===t.target.type?t.target:t.target.parentElement).canSubmit&&e.submit()})},submit:function(){var t=this,e=this.$swal;this.$axios.post("/apis/users",{verification_key:this.verification_key,verification_code:this.verification_code,name:this.username,password:this.password}).then(function(e){console.log(e.data),t.login(e.data)}).catch(function(t){console.log(t.response),null!=t.response&&e({text:t.response.data.errors.name[0],confirmButtonText:"我知道了",showCancelButton:!1})})},login:function(t){this.$store.dispatch("login",t),localStorage.setItem("authorization",o()(t.meta)),this.showMsg("注册成功","success")},showMsg:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.msg=t,this.msgType=a,this.msgShow=!1,this.$nextTick(function(){e.msgShow=!0})}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-md-offset-4 floating-box"},[a("Modal",{staticClass:"modal-sm text-center",attrs:{show:t.showCaptcha},on:{"update:show":function(e){t.showCaptcha=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        请输入图形验证码\n      ")]),t._v(" "),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"}),t._v(" "),a("div",{staticClass:"col-md-6 text-center"},[t._v("\n            点击图片重新获取验证码\n            "),a("div",{staticClass:"thumbnail",attrs:{title:"点击图片重新获取验证码"},on:{click:t.getCaptcha}},[a("img",{staticClass:"captcha vcenter",attrs:{src:t.captcha_image_content}})]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.captcha_code,expression:"captcha_code",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{title:"图片验证码"},expression:"{ title: '图片验证码' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写验证码"},domProps:{value:t.captcha_code},on:{input:function(e){e.target.composing||(t.captcha_code=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-md-3"})])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.target!==e.currentTarget?null:t.getVerification(e)}}},[t._v("发送验证码")])])]),t._v(" "),a("Message",{attrs:{show:t.msgShow,type:t.msgType,msg:t.msg},on:{"update:show":function(e){t.msgShow=e}}}),t._v(" "),a("div",{staticClass:"panel panel-default"},[t._m(0),t._v(" "),a("div",{staticClass:"panel-body",attrs:{"data-validator-form":""}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("用户名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:input.required",value:{regex:/^[a-zA-Z]+\w*\s?\w*$/,error:"用户名要求以字母开头的单词字符"},expression:"{ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }",arg:"input",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{regex:/^\w{6,16}$/,error:"密码要求 6 ~ 16 个单词字符"},expression:"{ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"请填写密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("确认密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cpassword,expression:"cpassword",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{target:"#password"},expression:"{ target: '#password' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"password",placeholder:"请填写确认密码"},domProps:{value:t.cpassword},on:{input:function(e){e.target.composing||(t.cpassword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("手机号码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phone,expression:"phone",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:input.required",value:{regex:/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/,error:"请正确输入手机号码"},expression:"{ regex: /^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/, error: '请正确输入手机号码' }",arg:"input",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写手机号码"},domProps:{value:t.phone},on:{blur:[function(e){e.preventDefault(),t.getCaptcha()},function(e){t.$forceUpdate()}],input:function(e){e.target.composing||(t.phone=e.target.value.trim())}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("手机验证码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.verification_code,expression:"verification_code",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:input.required",value:{regex:/^\d{4}$/,error:"请正确输入手机验证码"},expression:"{ regex: /^\\d{4}$/, error: '请正确输入手机验证码' }",arg:"input",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写手机验证码"},domProps:{value:t.verification_code},on:{input:function(e){e.target.composing||(t.verification_code=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"},on:{click:t.register}},[a("i",{staticClass:"fa fa-btn fa-sign-in"}),t._v(" 注册\n        ")])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("请注册")])])}]};var n=a("VU/8")(i,r,!1,function(t){a("zJLi")},"data-v-5e50c187",null);e.default=n.exports},zJLi:function(t,e){}});
//# sourceMappingURL=5.5e5ec7e575fef194ebd3.js.map